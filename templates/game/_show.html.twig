<div class="bg-white rounded-xl shadow-lg overflow-hidden {{ task_finished|length >= tasks_required ? 'hover:shadow-2xl transition-all duration-300 transform hover:scale-105' : '' }}">
    {% if task_finished|length >= tasks_required %}
        <a href='steam://run/{{ game.appid }}' class='cursor-pointer'>
    {% endif %}
    <div class="relative">
        <div class="aspect-w-16 aspect-h-9 bg-gradient-to-br from-teal-100 to-cyan-200 flex items-center justify-center p-6">
            <div class="relative bg-white rounded-xl p-3 shadow-xl">
                <img src="{{ getImage(game.appid, game.img_icon_url) }}"
                     alt="{{ game.name }}"
                     class="w-16 h-16 object-contain">
            </div>
        </div>
        <div class="absolute top-2 right-2 bg-cyan-500 text-white px-3 py-1 rounded-full text-xs font-bold shadow-lg">
            {% set hours = (game.playtime_forever / 60)|round(0, 'floor') %}
            {% set minutes = game.playtime_forever % 60 %}
            {% if hours > 0 %}
                {{ hours }}h{{ minutes > 0 ? minutes ~ 'm' : '' }}
            {% else %}
                {{ minutes }}m
            {% endif %}
        </div>
    </div>
    <div class="p-4 bg-stone-100">
        <h3 class="font-bold text-gray-800 text-sm line-clamp-2 min-h-[2.5rem]">{{ game.name }}</h3>
        <div class="mt-2 flex items-center text-xs text-gray-500">
            <i class="fa-regular fa-clock me-1"></i>
            {% if game.rtime_last_played is defined and game.rtime_last_played > 0 %}
                Last played
                {% set now = "now"|date('U') %}
                {% set daysSince = ((now - game.rtime_last_played) / 86400)|round(0, 'floor') %}
                {% if daysSince == 0 %}
                    today
                {% elseif daysSince == 1 %}
                    yesterday
                {% elseif daysSince < 7 %}
                    {{ daysSince }} days ago
                {% elseif daysSince < 30 %}
                    {{ (daysSince / 7)|round(0, 'floor') }} weeks ago
                {% elseif (daysSince / 30)|round(0, 'floor') == 1%}
                    1 month ago
                {% elseif daysSince < 365 %}
                    {{ (daysSince / 30)|round(0, 'floor') }} months ago
                {% elseif (daysSince / 365)|round(0, 'floor') == 1%}
                    1 year ago
                {% else %}
                    {{ (daysSince / 365)|round(0, 'floor') }} years ago
                {% endif %}
            {% else %}
                Never played
            {% endif %}
        </div>
    </div>
    {% if task_finished|length >= tasks_required %}
        </a>
    {% endif %}
</div>
